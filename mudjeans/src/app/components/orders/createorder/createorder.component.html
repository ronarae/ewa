<ng-template #newRowModal>
    <h2 mat-dialog-title>Add order row</h2>
    <form>
        <mat-dialog-content>
            <div class="form-group">
                <label for="productCategorySelect">Product Category</label>
                <select (change)="categorySelectChange()" [formControl]="categorySelect" class="form-control"
                        id="productCategorySelect">
                    <option></option>
                    <option *ngFor="let category of categories" value="{{category}}">
                        {{ category }}
                    </option>
                </select>
            </div>
            <div class="form-group">
                <label for="styleNameSelect">Style Name</label>
                <select (change)="styleNameSelectChange()" [formControl]="styleNameSelect" class="form-control"
                        id="styleNameSelect">
                    <option></option>
                    <option *ngFor="let styleName of styleNames" value="{{styleName}}">
                        {{ styleName }}
                    </option>
                </select>
            </div>
            <div class="form-group">
                <label for="fabricSelect">Fabric</label>
                <select (change)="fabricSelectChange()" [formControl]="fabricSelect" class="form-control"
                        id="fabricSelect">
                    <option></option>
                    <option *ngFor="let fabric of fabrics" value="{{fabric}}">
                        {{ fabric }}
                    </option>
                </select>
            </div>
            <div class="form-group">
                <label for="washingSelect">Washing</label>
                <select (change)="washingSelectChange()" [formControl]="washingSelect" class="form-control"
                        id="washingSelect">
                    <option></option>
                    <option *ngFor="let washing of washings" value="{{washing}}">
                        {{ washing }}
                    </option>
                </select>
            </div>
            <div class="form-group">
                <label for="productCodeSelect">Product Code</label>
                <select [formControl]="productCodeSelect" class="form-control" id="productCodeSelect">
                    <option></option>
                    <option *ngFor="let productCode of productCodes" value="{{productCode}}">
                        {{ productCode }}
                    </option>
                </select>
            </div>
            <div class="form-group">
                <label for="amountInput">Amount</label>
                <input type="number" [formControl]="amountInput" class="form-control" id="amountInput">
            </div>
        </mat-dialog-content>
        <mat-dialog-actions>
            <button mat-button [mat-dialog-close]="true">Add product</button>
            <button mat-button mat-dialog-close>Cancel</button>
        </mat-dialog-actions>
    </form>
</ng-template>

<div class="container">
    <!-- Content Row -->
    <h2 class="text-center">Create Order</h2>
    <hr>
    <mat-progress-bar mode="indeterminate" *ngIf="loading"></mat-progress-bar>
    <div class="row" *ngIf="!loading">
        <div class="col">
            <!-- Content Column -->
            <div class="col-lg mb-4">
                <form>
                    <table class="table">
                        <thead>
                        <tr>
                            <th>Product</th>
                            <th>Amount</th>
                            <th></th>
                        </tr>
                        </thead>
                        <tr>
                            <td colspan="3" *ngIf="rows.length === 0">
                                <span style="text-align:center">No products added to order yet</span>
                            </td>
                        </tr>
                        <tr *ngFor="let row of rows; let i = index">
                            <td>{{ row.productCode }}</td>
                            <td>{{ row.amount }}</td>
                            <td>
                                <button mat-button (click)="removeRow(i)">Remove</button>
                            </td>
                        </tr>
                    </table>
                    <div class="form-group">
                        <label for="exampleFormControlTextarea1">Additional information</label>
                        <textarea class="form-control" id="exampleFormControlTextarea1" rows="4"></textarea>
                    </div>
                    <div class="row">
                        <div class="col-2">
                            <button class="btn btn-info" id="addJean" (click)="createRow(newRowModal)">Add Jean</button>
                        </div>
                        <div class="col-2">
                            <button (click)="placeNewOrder()" class="btn btn-primary" id="placeOrderBtn">Place
                                order
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
